@using SmartPaperEdms.Web.App_Code;
@model Eskul.Models.CreateStudentDTO
@{
    var parentAdd = Model.ParentAdd;
}
 
<div class="modal fade" id="modal-lg">
    <div class="modal-dialog modal-lg">
        <div class="modal-content box box-primary">
            <div class="modal-header">
                <h4 class="modal-title">Add Parent</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body">
                <form asp-action="ParentAdd" id="modalform" enctype="multipart/form-data" class="needs-validation" novalidate>
                     <div class="col-md-12">
                    <div class="row">
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="" style="font-weight: normal !important;">Prefix</label><small class="req"> *</small>
                                    @Html.DropDownListFor(m => m.ParentAdd.Prefix, new List<SelectListItem>
                                    {       new SelectListItem{Text="Select", Value=""},
                                    new SelectListItem{Text="Mister", Value="Mr"},
                                    new SelectListItem{Text="Miss", Value="Miss"},
                                    new SelectListItem{Text="Mrs", Value="Madam"},
                                    new SelectListItem{Text="Ms", Value="Ms"}
                                    },htmlAttributes:new { @class = "select",style = "width: 100%;font-weight: normal !important;",id="Prefix",name="Prefix",required = "required"})
                                    <div class="invalid-feedback">This Field is Required</div>
                                </div>
  
                        </div>
                            <div class="col-md-3">
                        <div class="form-group">
                                    <label asp-for="@Model.ParentAdd.Firstname" class="control-label" style="font-weight: normal !important;">First Name</label>
                                    <input asp-for="@Model.ParentAdd.Firstname" class="form-control form-control-sm" required />
                            <div class="invalid-feedback">This Field is Required</div>
                        </div>
                        </div>
                            <div class="col-md-3">
                        <div class="form-group">
                                    <label asp-for="@Model.ParentAdd.Middlename" class="control-label" style="font-weight: normal !important;">Middle Name</label>
                                    <input asp-for="@Model.ParentAdd.Middlename"  class="form-control form-control-sm" />
                        </div>
                        </div>
                            <div class="col-md-3">
                        <div class="form-group">
                                    <label asp-for="@Model.ParentAdd.Lastname" class="control-label" style="font-weight: normal !important;">Last Name</label>
                                    <input asp-for="@Model.ParentAdd.Lastname"  class="form-control form-control-sm" required />
                            <div class="invalid-feedback">This Field is Required</div>
                        </div>
                        </div>
                            <div class="col-md-3">
                        <div class="form-group">
                            <label asp-for="@Model.ParentAdd.Occupation" class="control-label" style="font-weight: normal !important;"></label>
                                    <input asp-for="@Model.ParentAdd.Occupation" class="form-control form-control-sm" required />
                            <div class="invalid-feedback">This Field is Required</div>
                        </div>
                        </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="" style="font-weight: normal !important;">Gender</label><small class="req"> *</small>
                                    @Html.DropDownListFor(m => m.ParentAdd.Gender, new List<SelectListItem>
                                    {       new SelectListItem{Text="Select", Value=""},
                                    new SelectListItem{Text="Male", Value="M"},
                                    new SelectListItem{Text="Female", Value="F"}},htmlAttributes:new { @class = "select",style = "width: 100%;font-weight: normal !important;",id="Gender",name="Gender",required = "required"})
                                    <div class="invalid-feedback">This Field is Required</div>
                                </div>
                            </div>
                                <div class="col-md-3">
                        <div class="form-group">
                                    <label asp-for="@Model.ParentAdd.Residence" class="control-label" style="font-weight: normal !important;">Residence</label>
                            <input asp-for="@Model.ParentAdd.Residence" class="form-control form-control-sm" required />
                            <div class="invalid-feedback">This Field is Required</div>
                        </div>
                        </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label asp-for="@Model.ParentAdd.Nin" class="control-label" style="font-weight: normal !important;"></label>
                                    <input asp-for="@Model.ParentAdd.Nin" class="form-control form-control-sm" />
                                </div>
                            </div>
                            <div class="col-md-3">
                        <div class="form-group">
                            <label asp-for="@Model.ParentAdd.Contact1" class="control-label" style="font-weight: normal !important;">Primary Contact</label>
                            <input asp-for="@Model.ParentAdd.Contact1" class="form-control form-control-sm" required />
                            <div class="invalid-feedback">This Field is Required</div>
                        </div>
                        </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label asp-for="@Model.ParentAdd.Contact2" class="control-label" style="font-weight: normal !important;">Other Contact</label>
                                    <input asp-for="@Model.ParentAdd.Contact2" class="form-control form-control-sm" />
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label asp-for="@Model.ParentAdd.Email" class="control-label" style="font-weight: normal !important;"></label>
                                    <input asp-for="@Model.ParentAdd.Email" class="form-control form-control-sm" />
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label asp-for="@Model.ParentAdd.Tribe" class="control-label" style="font-weight: normal !important;"></label>
                                    <input asp-for="@Model.ParentAdd.Tribe" class="form-control form-control-sm" />
                                </div>
                            </div>
                    </div>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <input type="button" value="Save" class="btn btn-block btn-sm mybtn" style=" width:200px;" onclick="sendPostRequest()" />

                    </div>
                </form>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    function sendPostRequest() {
        var formDatas = $("modalform").serialize();
        console.log('formDatas', formDatas);
        const formElement = document.querySelector('#myModal form');
        const formData = new FormData(formElement);

        // Check if form data is collected correctly
        for (const pair of formData.entries()) {
            console.log(pair[0] + ': ' + pair[1]);
        }

        // Make a POST request
        fetch('/Admission/ParentAddAsync', {
            method: 'POST',
            body: formData
        })
            .then(response => response.json())
            .then(data => {
                // Handle the response data as needed
                if (data.success) {
                    // Success, you may want to close the modal or show a success message
                    $('#modal-lg').modal('hide');
                } else {
                    // Handle errors, display a message, or take appropriate action
                    alert('Error: ' + data.message);
                }
            })
            .catch(error => {
                // Handle network errors or other issues
                console.error('Error:', error);
            });
    }
</script>

