@model Eskul.Models.subject
@{
    ViewData["Title"] = "Home Page";
}
<br />
<style>
    .info-box {
        box-shadow: 0 0 1px rgba(0,0,0,.125), 0 1px 3px rgba(0,0,0,.2);
        border-radius: 0.25rem;
        background-color: #fff;
        display: -ms-flexbox;
        display: flex;
        margin-bottom: 1rem;
        min-height: 70px;
        padding: 0.5rem;
        position: relative;
        width: 100%;
        height: 20px;
    }

        .info-box .info-box-icon {
            border-radius: 0.25rem;
            -ms-flex-align: center;
            align-items: center;
            display: -ms-flexbox;
            display: flex;
            font-size: 1.875rem;
            -ms-flex-pack: center;
            justify-content: center;
            text-align: center;
            width: 50px;
        }
</style>
<!-- Main content -->
<section class="content">
    <div class="container-fluid">
        <!-- Info boxes -->
        <div class="row">
            <div class="col-12 col-sm-6 col-md-3">
                <div class="info-box">
                    <span class="info-box-icon bg-info elevation-1"><i class="fas fa-users" style="color:azure;"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text">Total Students</span>
                        <span class="info-box-number" id="StudentCount"></span>
                    </div>
                    <!-- /.info-box-content -->
                </div>
                <!-- /.info-box -->
            </div>
            <!-- /.col -->
            <div class="col-12 col-sm-6 col-md-3">
                <div class="info-box">
                    <span class="info-box-icon bg-danger elevation-1"><i class="fas fa-chalkboard-teacher" style="color:azure;"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text">Total Teachers</span>
                        <span class="info-box-number" id="TeacherCount"></span>
                    </div>
                    <!-- /.info-box-content -->
                </div>
                <!-- /.info-box -->
            </div>
            <!-- /.col -->
            <!-- fix for small devices only -->
            <div class="clearfix hidden-md-up"></div>
            <div class="col-12 col-sm-6 col-md-3">
                <div class="info-box">
                    <span class="info-box-icon bg-success elevation-1"><i class="fas fa-users" style="color:azure;"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text">Total Parents</span>
                        <span class="info-box-number" id="ParentCount"></span>
                    </div>
                    <!-- /.info-box-content -->
                </div>
                <!-- /.info-box -->
            </div>
            <!-- /.col -->
            <div class="col-12 col-sm-6 col-md-3">
                <div class="info-box">
                    <span class="info-box-icon bg-primary elevation-1"><i class="fas fa-money-bill" style="color:azure;"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text">Total Earnings</span>
                        <span class="info-box-number">$2,000</span>
                    </div>
                    <!-- /.info-box-content -->
                </div>
                <!-- /.info-box -->
            </div>
            <!-- /.col -->
        </div>

        <!-- /.row -->
        <!-- Main row -->
        <div class="row">
            <!-- Left col -->
            <div class="col-md-8">
                <!-- MAP & BOX PANE -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Student Population By Class</h3>
                        <div class="card-tools">
                            <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                <i class="fas fa-minus"></i>
                            </button>
                        </div>
                    </div>
                    <!-- /.card-header -->
                    <div class="card-body p-0">
                        <div class="d-md-flex">
                            <div class="p-1 flex-fill" style="overflow: hidden">
                                <!-- Map will be created here -->

                                <canvas id="healthConditionChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                               
                            </div>
                        </div><!-- /.d-md-flex -->
                    </div>
                    <!-- /.card-body -->
                </div>
                <div class="card box box-primary">
                    <div class="row row-cols-1">
                        <div class="col">
                            <div class="card-header">
                                <h3 class="card-title">Daily Attendance</h3>
                                <div class="card-tools">
                                    <div class="form-group">
                                        <label for="classFilter">Filter by Class:</label>
                                        <select id="classFilter" class="form-control">
                                            <option value="all">All</option>
                                            <option value="Senior One">Senior One</option>
                                            <option value="Senior Two">Senior Two</option>
                                            <option value="Senior Three">Senior Three</option>
                                            <option value="Senior Four">Senior Four</option>
                                            <option value="Senior Five">Senior Five</option>
                                            <option value="Senior Six">Senior Six</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body p-0">
                                <div class="d-md-flex">
                                    <div class="p-1 flex-fill" style="overflow: hidden">
                                        <canvas id="monthlyAttendanceChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card box box-primary">
                    <div class="card-header">
                        <h3 class="card-title">Student Marks by Exam</h3>
                        <div class="card-tools">
                            <div class="form-group">
                                <label for="examDropdown">Filter By Exam:</label>
                                <select id="examDropdown" class="form-control">
                                    <option value="EOT">EOT</option>
                                    <option value="BOT">BOT</option>
                                    <option value="MID">MID</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">

                        <div class="chart">
                            <canvas id="marksChart" style="min-height: 400px; height: 400px; max-height: 400px; max-width: 100%;"></canvas>
                        </div>
                    </div>
                </div>

            </div>
            <!-- /.col -->

            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Student Population By Class</h3>
                        <div class="card-tools">
                            <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                <i class="fas fa-minus"></i>
                            </button>
                        </div>
                    </div>
                    <!-- /.card-header -->
                    <div class="card-body p-0">
                        <div class="d-md-flex">
                            <div class="p-1 flex-fill" style="overflow: hidden">
                                <!-- Map will be created here -->
                                <div class="chart">
                                    <canvas id="medicationChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                                </div>
                            </div>
                        </div><!-- /.d-md-flex -->
                    </div>
                    <!-- /.card-body -->
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Active Now</h3>
                        <span class="badge badge-danger" id="userCount"></span>
                        <div class="card-tools">
                            <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                <i class="fas fa-minus"></i>
                            </button>
                        </div>
                    </div>
                    <!-- /.card-header -->
                    <div class="card-body p-0">
                        <ul class="users-list clearfix">
                            <li>
                                <img src="/Files/noimage.png" alt="User Image">
                                <a class="users-list-name" href="#">Alexander Pierce</a>
                                <span class="users-list-date">Today</span>
                            </li>
                            <li>
                                <img src="/Files/noimage.png" alt="User Image">
                                <a class="users-list-name" href="#">Norman</a>
                                <span class="users-list-date">Yesterday</span>
                            </li>
                            <li>
                                <img src="/Files/noimage.png" alt="User Image">
                                <a class="users-list-name" href="#">Jane</a>
                                <span class="users-list-date">12 Jan</span>
                            </li>
                            <li>
                                <img src="/Files/noimage.png" alt="User Image">
                                <a class="users-list-name" href="#">John</a>
                                <span class="users-list-date">12 Jan</span>
                            </li>
                        </ul>
                        <!-- /.users-list -->
                    </div>
                    <!-- /.card-body -->
                    <div class="card-footer text-center">
                        <a href="javascript:">View All Online Users</a>
                    </div>
                    <!-- /.card-footer -->
                </div>

                <!-- Include your SignalR JavaScript code to update the user count -->
                <script src="your-signalr-script.js"></script>

                <!-- /.card -->

                <div class="card">
                    <div class="card-header">
                        <div class="card-tools">
                            <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                <i class="fas fa-minus"></i>
                            </button>
                        </div>
                        <h3 class="card-title">Recently Added Disciplinary Cases</h3>
                    </div>
                    <!-- /.card-header -->
                    <div class="card-body p-0">
                        <table class="table table-striped table-sm">
                            <thead>
                                <tr>
                                    <th>Student</th>
                                    <th>Case</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>John Doe</td>
                                    <td>Fighting in the classroom</td>
                                    <td>Suspension</td>
                                </tr>
                                <tr>
                                    <td>Jane Smith</td>
                                    <td>Using inappropriate language</td>
                                    <td>Written warning</td>
                                </tr>
                                <tr>
                                    <td>Robert Johnson</td>
                                    <td>Disrupting class activities</td>
                                    <td>Detention</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="card-footer text-center">
                        <a href="javascript:">View All Cases</a>
                    </div>
                    <!-- /.card-body -->
                </div>
                <!-- /.card -->
            </div>

            <!-- /.col -->
        </div>
    </div><!--/. container-fluid -->
</section>
<script src="~/js/signalr.js"></script>
<script>
    const connection = new signalR.HubConnectionBuilder()
        .withUrl("/StudentCountHub")
        .build();

    connection.on("UserCountChanged", function (userCount) {
        $("#userCount").text(userCount + ' ' + 'Users Online');

    });
    connection.on("StudentCountChanged", function (StudentCount) {
        $("#StudentCount").text(StudentCount);
    });
    connection.on("TeacherCountChanged", function (TeacherCount) {
        $("#TeacherCount").text(TeacherCount);
    });
    connection.on("ParentCountChanged", function (ParentCount) {
        $("#ParentCount").text(ParentCount);
    });
    connection.start().then(function () {
        console.log("SignalR connection established.");
    });
</script>
<script src="~/js/Jquery.min.3.6.0"></script>
<script src="~/lib/jquery/jquery.min.js"></script>
<script src="~/plugs/Chart.min.js"></script>
<script src="~/js/moment.min.js"></script>
<script src="~/js/fullcalendar.min.js"></script>
<script>
    // Sample data for Health Condition Distribution chart
    const healthConditionData = {
        labels: ['Flu', 'Common Cold', 'Allergies', 'Stomachache'],
        datasets: [{
            label: 'Health Condition Distribution',
            data: [25, 15, 10, 5],
            backgroundColor: ['#f56954', '#00a65a', '#f39c12', '#3c8dbc'],
        }],
    };

     Sample data for Medication Administration chart
    const medicationData = {
        labels: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'],
        datasets: [{
            label: 'Medication A',
            data: [10, 8, 15, 12, 20],
            backgroundColor: '#3c8dbc',
        }, {
            label: 'Medication B',
            data: [5, 12, 18, 10, 15],
            backgroundColor: '#00c0ef',
        }],
    };

     Sample data for Allergy Breakdown chart
    const allergyData = {
        labels: ['Peanut', 'Dairy', 'Shellfish'],
        datasets: [{
            label: 'Allergy Breakdown',
            data: [20, 15, 10],
            backgroundColor: ['#f56954', '#00a65a', '#f39c12'],
        }],
    };

    // Sample data for Sick Bay Utilization chart
    const utilizationData = {
        labels: ['January', 'February', 'March', 'April', 'May'],
        datasets: [{
            label: 'Sick Bay Utilization',
            data: [80, 65, 75, 60, 85],
            backgroundColor: '#3c8dbc',
        }],
    };

    // Sample data for Absenteeism Rate chart
    const absenteeismData = {
        labels: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'],
        datasets: [{
            label: 'Absenteeism Rate',
            data: [5, 3, 7, 4, 6],
            backgroundColor: '#f56954',
        }],
    };

    // Sample data for Referral Analysis chart
    const referralData = {
        labels: ['Doctor', 'Nurse', 'Specialist'],
        datasets: [{
            label: 'Referral Analysis',
            data: [20, 30, 15],
            backgroundColor: ['#3c8dbc', '#f39c12', '#00c0ef'],
        }],
    };

    // Sample data for Vaccination Coverage chart
    const vaccinationData = {
        labels: ['DTP', 'MMR', 'Hepatitis B'],
        datasets: [{
            label: 'Vaccination Coverage',
            data: [80, 90, 75],
            backgroundColor: ['#00a65a', '#f39c12', '#3c8dbc'],
        }],
    };

    // Sample data for Wellness Program Participation chart
    const wellnessData = {
        labels: ['Yoga', 'Meditation', 'Exercise'],
        datasets: [{
            label: 'Wellness Program Participation',
            data: [40, 35, 45],
            backgroundColor: ['#f56954', '#00c0ef', '#00a65a'],
        }],
    };

    // Create the Health Condition Distribution chart
    const healthConditionCtx = document.getElementById('healthConditionChart').getContext('2d');
    new Chart(healthConditionCtx, {
        type: 'bar',
        data: healthConditionData,
        options: {
            // Chart options
        },
    });

    // Create the Medication Administration chart
    const medicationCtx = document.getElementById('medicationChart').getContext('2d');
    new Chart(medicationCtx, {
        type: 'bar',
        data: medicationData,
        options: {
            // Chart options
        },
    });

    // Create the Allergy Breakdown chart
    const allergyCtx = document.getElementById('allergyChart').getContext('2d');
    new Chart(allergyCtx, {
        type: 'bar',
        data: allergyData,
        options: {
            // Chart options
        },
    });

    // Create the Sick Bay Utilization chart
    const utilizationCtx = document.getElementById('utilizationChart').getContext('2d');
    new Chart(utilizationCtx, {
        type: 'bar',
        data: utilizationData,
        options: {
            // Chart options
        },
    });

    // Create the Absenteeism Rate chart
    const absenteeismCtx = document.getElementById('absenteeismChart').getContext('2d');
    new Chart(absenteeismCtx, {
        type: 'bar',
        data: absenteeismData,
        options: {
            // Chart options
        },
    });

    // Create the Referral Analysis chart
    const referralCtx = document.getElementById('referralChart').getContext('2d');
    new Chart(referralCtx, {
        type: 'bar',
        data: referralData,
        options: {
            // Chart options
        },
    });

    // Create the Vaccination Coverage chart
    const vaccinationCtx = document.getElementById('vaccinationChart').getContext('2d');
    new Chart(vaccinationCtx, {
        type: 'bar',
        data: vaccinationData,
        options: {
            // Chart options
        },
    });

    // Create the Wellness Program Participation chart
    const wellnessCtx = document.getElementById('wellnessChart').getContext('2d');
    new Chart(wellnessCtx, {
        type: 'bar',
        data: wellnessData,
        options: {
            // Chart options
        },
    });
</script>








